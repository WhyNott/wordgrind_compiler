<html>
  <head>
    <script src="js_assets/runtime.js"></script>
    <script src="compiled.js"></script>
    <script src="js_assets/node_debugger.js"></script>
    <script src="js_assets/cytoscape.min.js"></script>
    <script src="js_assets/dagre.js"></script>
    <script src="js_assets/cytoscape-dagre.js"></script>
  </head>
  <body>
    <div style="display: flex; justify-content: space-evenly">
    <div>
        <input type="text" id="input" style="width: 20em;"> <input type="submit" onclick="run_query()" value="Run query"></br>
        </textarea>
         <div id="output" style="width: 30em;border-width: 1px;border-style: solid;min-height: 50rem; padding-left: 0.5em;margin-top: 1rem;"></div>
         
        <script>
          function run_query(){
              const input = document.getElementById("input");
              const output = document.getElementById("output");

              const out_pipe = (str) => {
                  let p = document.createElement("p");
                  p.appendChild(document.createTextNode(str + "\n"));
                  output.appendChild(p);
              };
              dc.clear();
              try {
                  query(input.value, out_pipe);
                  dc.set_step_to(0);
              } catch (err) {
                  out_pipe(err.toString());
              }
          }

          
          window.addEventListener('DOMContentLoaded', function(){
              const picker = document.getElementById("num_picker");
              const label = document.getElementById("label_display");
              init_debugger(picker, label);
              picker.addEventListener('input', (n) => dc.set_step_to(Number(n.data)));
              
          });

          
          
          
        </script>
    </div>
    <div style="height: 50rem; width: 50vw;">
      <input type="number" disabled="true" name="quantity" min="0" max="0" value="0" id="num_picker">
      <h3 style="display: inline-block;padding-left: 1rem;" id="label_display">...</h3>
      <div style=" border-style: solid; border-width: thin; height: 100%" id="cy"> </div>
    </div>
    </div>
    
  </body>
  
</html>
